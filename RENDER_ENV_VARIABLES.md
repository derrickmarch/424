# Render.com Environment Variables Reference

## Quick Copy-Paste for Render Dashboard

When setting up your service on Render.com, add these environment variables in the **Environment** tab:

---

## üî¥ Required Variables (Must Set Manually)

### Twilio Configuration

```
TWILIO_ACCOUNT_SID=your_account_sid_here
TWILIO_AUTH_TOKEN=your_auth_token_here
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_WEBHOOK_BASE_URL=https://YOUR-APP-NAME.onrender.com
```

**Note:** Replace `YOUR-APP-NAME` with your actual Render app URL after deployment!

### OpenAI Configuration

```
OPENAI_API_KEY=sk-proj-YOUR_KEY_HERE
OPENAI_MODEL=gpt-4-turbo-preview
```

### Test Mode Configuration

```
TEST_MODE=true
TEST_PHONE_NUMBER=+19092028031
```

**Important:** `TEST_PHONE_NUMBER` must be verified in your Twilio account!

---

## ‚úÖ Auto-Configured Variables (Already in render.yaml)

These are automatically set by the `render.yaml` file:

```
APP_HOST=0.0.0.0
APP_PORT=8001
APP_ENV=production
SECRET_KEY=<auto-generated-by-render>
DATABASE_URL=<auto-linked-from-postgres>
RENDER=true

MAX_CONCURRENT_CALLS=1
MAX_RETRY_ATTEMPTS=2
RETRY_BACKOFF_MINUTES=15,120
CALL_TIMEOUT_SECONDS=300

ENABLE_AUTO_CALLING=false
CALL_LOOP_INTERVAL_MINUTES=5
BATCH_SIZE_PER_LOOP=10

ENABLE_CALL_RECORDING=false
REQUIRE_RECORDING_CONSENT=false
ENABLE_TRANSCRIPTION=false
```

---

## üìã Complete List with Descriptions

| Variable | Required | Description | Example |
|----------|----------|-------------|---------|
| **Twilio** ||||
| `TWILIO_ACCOUNT_SID` | ‚úÖ Yes | Your Twilio Account SID | `ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx` |
| `TWILIO_AUTH_TOKEN` | ‚úÖ Yes | Your Twilio Auth Token (sensitive) | `your_auth_token_here` |
| `TWILIO_PHONE_NUMBER` | ‚úÖ Yes | Your Twilio phone number | `+1234567890` |
| `TWILIO_WEBHOOK_BASE_URL` | ‚úÖ Yes | Your Render app URL | `https://your-app.onrender.com` |
| **OpenAI** ||||
| `OPENAI_API_KEY` | ‚úÖ Yes | Your OpenAI API key (sensitive) | `sk-proj-...` |
| `OPENAI_MODEL` | ‚ö™ Optional | OpenAI model to use | `gpt-4-turbo-preview` |
| **Test Mode** ||||
| `TEST_MODE` | ‚ö™ Optional | Enable test mode (true/false) | `true` |
| `TEST_PHONE_NUMBER` | ‚úÖ Yes (if TEST_MODE=true) | Verified test number for trial accounts | `+19092028031` |
| **Application** ||||
| `APP_HOST` | ‚ö™ Auto | Host to bind to | `0.0.0.0` |
| `APP_PORT` | ‚ö™ Auto | Port number (use $PORT on Render) | `8001` |
| `APP_ENV` | ‚ö™ Auto | Environment name | `production` |
| `SECRET_KEY` | ‚ö™ Auto-generated | Secret key for sessions | Auto-generated |
| `RENDER` | ‚ö™ Auto | Render platform detection | `true` |
| **Database** ||||
| `DATABASE_URL` | ‚ö™ Auto-linked | Database connection string | Auto-linked to PostgreSQL |
| **Call Settings** ||||
| `MAX_CONCURRENT_CALLS` | ‚ö™ Optional | Max concurrent calls | `1` |
| `MAX_RETRY_ATTEMPTS` | ‚ö™ Optional | Max retry attempts | `2` |
| `RETRY_BACKOFF_MINUTES` | ‚ö™ Optional | Retry backoff intervals | `15,120` |
| `CALL_TIMEOUT_SECONDS` | ‚ö™ Optional | Call timeout | `300` |
| **Auto-Calling** ||||
| `ENABLE_AUTO_CALLING` | ‚ö™ Optional | Enable automatic calling | `false` |
| `CALL_LOOP_INTERVAL_MINUTES` | ‚ö™ Optional | Minutes between batches | `5` |
| `BATCH_SIZE_PER_LOOP` | ‚ö™ Optional | Records per batch | `10` |
| **Compliance** ||||
| `ENABLE_CALL_RECORDING` | ‚ö™ Optional | Record calls | `false` |
| `REQUIRE_RECORDING_CONSENT` | ‚ö™ Optional | Require consent | `false` |
| `ENABLE_TRANSCRIPTION` | ‚ö™ Optional | Transcribe calls | `false` |
| **Notifications** ||||
| `ADMIN_EMAIL` | ‚ö™ Optional | Admin email for alerts | `admin@example.com` |
| `ADMIN_PHONE` | ‚ö™ Optional | Admin phone for alerts | `+1234567890` |

---

## üîß How to Add Variables in Render Dashboard

### Method 1: During Initial Setup

1. Click **New +** ‚Üí **Web Service**
2. Connect repository
3. Click **Advanced** before creating
4. Add environment variables one by one

### Method 2: After Deployment

1. Go to your service dashboard
2. Click **Environment** tab in left sidebar
3. Click **Add Environment Variable**
4. Enter key and value
5. Click **Save Changes**
6. Service will restart automatically

---

## üîç Where to Find Your Values

### Twilio Credentials

1. Go to [Twilio Console](https://console.twilio.com/)
2. **Account SID** and **Auth Token**: Dashboard home page
3. **Phone Number**: Phone Numbers ‚Üí Manage ‚Üí Active Numbers
4. **Webhook URL**: Your Render URL (get after first deploy)

### OpenAI API Key

1. Go to [OpenAI Platform](https://platform.openai.com/)
2. Click your profile ‚Üí **API Keys**
3. Create new key or use existing

### Test Phone Number

1. Go to [Twilio Console](https://console.twilio.com/)
2. Phone Numbers ‚Üí Manage ‚Üí **Verified Caller IDs**
3. Click **Add a new number** if not verified
4. Verify via SMS/call

---

## üîÑ Updating Variables

### Change a Variable

1. Render Dashboard ‚Üí Your Service
2. **Environment** tab
3. Find the variable
4. Click the value to edit
5. Save changes
6. Service restarts automatically

### Delete a Variable

1. Click the **trash icon** next to variable
2. Confirm deletion
3. Service restarts

### Bulk Update

1. Use Render CLI:
   ```bash
   render env:set KEY1=value1 KEY2=value2
   ```

---

## ‚ö†Ô∏è Important Notes

### Sensitive Variables

These should be kept secret:
- `TWILIO_AUTH_TOKEN`
- `OPENAI_API_KEY`
- `SECRET_KEY`

Render automatically hides these values in the UI.

### Updating Webhook URL

After first deployment:
1. Note your Render URL (e.g., `https://account-verifier-abc123.onrender.com`)
2. Update `TWILIO_WEBHOOK_BASE_URL` with this URL
3. Update Twilio console with webhook endpoints:
   - Voice: `https://your-app.onrender.com/api/twilio/voice?verification_id={verification_id}`
   - Status: `https://your-app.onrender.com/api/twilio/status-callback`

### Database URL

Don't manually set `DATABASE_URL` if using Render's PostgreSQL:
- Render auto-links the database
- Connection string is automatically populated
- Updates automatically if database changes

### Test Mode

Start with `TEST_MODE=true`:
- ‚úÖ Safe for development
- ‚úÖ Works with trial accounts
- ‚úÖ No charges for testing

Switch to `TEST_MODE=false` when ready for production:
- ‚ö†Ô∏è Requires upgraded Twilio account
- üí∞ Real calls = real charges
- ‚ö†Ô∏è Can call any number

---

## üß™ Testing Your Configuration

After setting variables, test:

1. **Health Check**:
   ```
   https://your-app.onrender.com/health
   ```

2. **Login**:
   ```
   https://your-app.onrender.com/
   Username: admin
   Password: admin123
   ```

3. **Check Mode**:
   - Go to Settings page
   - View current mode (Test/Live)

---

## üìù Example: Complete Setup

Here's what your Environment tab should look like:

```
‚úÖ TWILIO_ACCOUNT_SID = ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
‚úÖ TWILIO_AUTH_TOKEN = ‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢
‚úÖ TWILIO_PHONE_NUMBER = +1234567890
‚úÖ TWILIO_WEBHOOK_BASE_URL = https://account-verifier-xyz.onrender.com
‚úÖ OPENAI_API_KEY = ‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢
‚úÖ OPENAI_MODEL = gpt-4-turbo-preview
‚úÖ TEST_MODE = true
‚úÖ TEST_PHONE_NUMBER = +19092028031
‚úÖ APP_ENV = production
‚úÖ RENDER = true
‚úÖ SECRET_KEY = [Auto-generated]
‚úÖ DATABASE_URL = [Auto-linked to PostgreSQL]
... (other variables from render.yaml)
```

---

## üÜò Troubleshooting

### "Missing required environment variable"

**Solution:** Check logs for specific variable name, add it in Environment tab

### "Invalid Twilio credentials"

**Solution:** 
1. Verify `TWILIO_ACCOUNT_SID` and `TWILIO_AUTH_TOKEN` in Twilio Console
2. Make sure no extra spaces
3. Re-enter if needed

### "TEST_MODE not working"

**Solution:**
1. Check `TEST_MODE=true` is set
2. Verify `TEST_PHONE_NUMBER` is set
3. Ensure test number is verified in Twilio
4. Try toggling via Settings page UI

### ".env file not found"

**This is normal on Render!** The system automatically uses database runtime settings instead.

---

## ‚úÖ Checklist

Before deploying, ensure you have:

- [ ] Twilio Account SID
- [ ] Twilio Auth Token
- [ ] Twilio Phone Number
- [ ] OpenAI API Key
- [ ] Test Phone Number (verified in Twilio)
- [ ] Render account created
- [ ] Repository pushed to GitHub

After deploying, verify:

- [ ] All required variables are set
- [ ] `TWILIO_WEBHOOK_BASE_URL` updated with Render URL
- [ ] Health endpoint responds
- [ ] Can login to dashboard
- [ ] Test mode is active

---

## üìö Related Documentation

- `RENDER_QUICKSTART.md` - Quick deployment guide
- `RENDER_DEPLOYMENT_GUIDE.md` - Detailed deployment documentation
- `TEST_MODE_GUIDE.md` - Test mode usage guide

---

Ready to deploy? Follow the `RENDER_QUICKSTART.md` guide! üöÄ
